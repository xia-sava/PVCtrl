<Window x:Class="PVCtrl.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PVCtrl"
        Title="{Binding WindowTitle}" Height="220" Width="680"
        Background="{StaticResource WindowBackgroundBrush}" FontFamily="Yu Gothic"
        FontSize="{StaticResource NormalFontSize}"
        Loaded="Window_Loaded" Closing="Window_Closing">
    <Window.DataContext>
        <local:MainViewModel />
    </Window.DataContext>
    <Grid Margin="6">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- ファイル名入力行 -->
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,0,0,6">
            <Label Content="録画ファイル名" VerticalAlignment="Center" Width="90" Padding="2" />
            <TextBox x:Name="FilenameTextBox" Text="{Binding Filename, UpdateSourceTrigger=PropertyChanged}"
                     Width="330" Margin="0,0,2,0"
                     VerticalContentAlignment="Center" />
            <Button Content="paste" Width="50" Margin="0,0,3,0"
                    Command="{Binding FilenamePasteCommand}" FontSize="{StaticResource NormalFontSize}" />
            <Button Content="●" Width="22" Foreground="Red" FontWeight="Bold"
                    Margin="3,0,3,0" Command="{Binding RecCommand}" />
            <Button Content="■" Width="22" Foreground="Blue" FontWeight="Bold"
                    Command="{Binding StopCommand}" />
        </StackPanel>

        <!-- 時間設定行 -->
        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="0,0,0,6">
            <Button Content="25" Width="32" Margin="0,0,3,0" Command="{Binding Min25Command}"
                    Padding="1" />
            <Button Content="30" Width="32" Margin="0,0,3,0" Command="{Binding Min30Command}"
                    Padding="1" />
            <Button Content="60" Width="32" Margin="0,0,3,0" Command="{Binding Min60Command}"
                    Padding="1" />
            <Button Content="90" Width="32" Margin="0,0,3,0" Command="{Binding Min90Command}"
                    Padding="1" />
            <Button Content="120" Width="32" Margin="0,0,3,0"
                    Command="{Binding Min120Command}" Padding="1" />
            <Button Content="180" Width="32" Margin="0,0,3,0"
                    Command="{Binding Min180Command}" Padding="1" />
            <TextBox x:Name="RecordMinutesTextBox" Text="{Binding RecordMinutes, UpdateSourceTrigger=PropertyChanged}"
                     Width="40" TextAlignment="Right" Margin="5,0,3,0"
                     PreviewMouseWheel="RecordMinutesTextBox_MouseWheel" />
            <Label Content="分後" VerticalAlignment="Center" Margin="0,0,8,0" Padding="2" />
            <ToggleButton Content="録画停止予約" VerticalAlignment="Center"
                          FontSize="{StaticResource LargeFontSize}"
                          Padding="6, 0"
                          IsChecked="{Binding StopReserveChecked}" />
        </StackPanel>

        <!-- PV操作行 -->
        <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Margin="0,0,0,6">
            <Button Content="PV起動" Width="60" Margin="0,0,3,0"
                    Command="{Binding InvokePvCommand}" Padding="1" />
            <Label Content="入力端子" VerticalAlignment="Center" Margin="3, 0, 2, 0" Padding="2" />
            <Button Content="A" Width="23" Margin="0,0,3,0" Command="{Binding LineACommand}"
                    Padding="1" />
            <Button Content="B" Width="23" Margin="0,0,3,0" Command="{Binding LineBCommand}"
                    Padding="1" />
            <Label Content=" 音声" VerticalAlignment="Center" Margin="3,0,3,0" Padding="2" />
            <Button Content="on/off" Width="48" Margin="0,0,3,0"
                    Command="{Binding SoundOnCommand}" Padding="1" />
            <Label Content=" アラーム" VerticalAlignment="Center" Margin="3,0,2,0" Padding="2" />
            <TextBox x:Name="AlarmMinutesTextBox" Text="{Binding AlarmMinutes, UpdateSourceTrigger=PropertyChanged}"
                     Width="50" TextAlignment="Right" Margin="0,0,2,0"
                     PreviewMouseWheel="AlarmMinutesTextBox_MouseWheel" VerticalContentAlignment="Center" />
            <Label Content="分前" VerticalAlignment="Center" Padding="2" />
        </StackPanel>

        <!-- 停止時刻表示（右側） -->
        <StackPanel Grid.Row="1" Grid.RowSpan="3" Grid.Column="1" Orientation="Vertical" Height="Auto"
                    Margin="20,0,0,0">
            <StackPanel Orientation="Horizontal" Height="20">
                <Label Content="録画停止時刻" Width="64" VerticalAlignment="Center" Margin="0 0 10 0" Padding="0"
                       FontSize="{StaticResource MediumFontSize}" />
                <Label Content="{Binding StopTimeLabel}" VerticalAlignment="Center"
                       FontSize="{StaticResource LargeFontSize}" Margin="0" Padding="0" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Height="20">
                <Label Content="録画停止まで" Width="64" VerticalAlignment="Center" Margin="0 0 10 0" Padding="0"
                       FontSize="{StaticResource MediumFontSize}" />
                <Label Content="{Binding RemainedTimeLabel}" VerticalAlignment="Center"
                       FontSize="{StaticResource LargeFontSize}" Margin="0" Padding="0" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Height="20" Margin="0,6,0,0">
                <ToggleButton Content="バッチ中スリープ許可" Margin="0"
                              FontSize="{StaticResource NormalFontSize}"
                              Padding="6,0"
                              IsChecked="{Binding AllowSleep}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Height="20" Margin="0,6,0,0">
                <ToggleButton Content="停止後にPVを閉じる" Margin="0"
                              FontSize="{StaticResource NormalFontSize}"
                              Padding="6,0"
                              IsChecked="{Binding ClosePvReserveChecked}" />
            </StackPanel>
        </StackPanel>

        <!-- メッセージ表示 -->
        <TextBox Grid.Row="3" Grid.Column="0"
                 Text="{Binding MessageText, Mode=OneWay}"
                 IsReadOnly="True"
                 TextWrapping="Wrap"
                 AcceptsReturn="True"
                 FontSize="{StaticResource SmallFontSize}"
                 IsTabStop="False"
                 IsReadOnlyCaretVisible="False"
                 Width="380"
                 Height="60"
                 MinHeight="60"
                 MaxHeight="90"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Top"
                 VerticalScrollBarVisibility="Auto"
                 HorizontalScrollBarVisibility="Disabled"
                 BorderThickness="1"
                 Background="{StaticResource WindowBackgroundBrush}"
                 BorderBrush="Silver" />
    </Grid>
</Window>
